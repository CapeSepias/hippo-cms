/*
 * Copyright 2014 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

.fixed-width (@width) {
    width: @width;
    min-width: @width;
    max-width: @width;
}

.fixed-height (@height) {
    height: @height;
    min-height: @height;
    max-height: @height;
}

.hippo-list-details {
    background-color: @body-bgcolor;
    border-collapse: collapse;

    // keep the styling that affect width in sync in the thead and tbody to ensure correctly aligned table headers
    > thead > tr > th,
    > tbody > tr > td {
        padding: @doclist-padding;

        &:first-child {
            padding-left: 0;
        }
        &:last-child {
            .fixed-width(@doclist-left-right-padding);
            padding: 0;
            border-bottom: red;
        }

        /* column types */
        &.doclisting-icon {
            .fixed-width(32px);
            span {
                .fixed-height(32px);
            }
        }
        &.doclisting-name {
            width: 100%;
            min-width: 10px;
            padding-left: 0;
        }
        &.doclisting-type {
            .fixed-width(100px);
        }
        &.doclisting-state {
            .fixed-width(51px);

            > span {
                display: block;
                height: 16px;
            }

            .state-new {
                background: url("@{images}/icons/state-offline-tiny.svg") no-repeat left;
            }
            .state-live {
                background: url("@{images}/icons/state-live-tiny.svg") no-repeat left;
            }
            .state-changed {
                background: url("@{images}/icons/state-changed-tiny.svg") no-repeat left;
            }

        }
        &.doclisting-date {
            .fixed-width(140px);
        }
        &.doclisting-lastmodified-by {
            .fixed-width(120px);
        }
        &.doclisting-translations {
            .fixed-width(120px);
            padding-top: 0;
            padding-bottom: 0;

            .hippo-translation-doclisting > ul {
                display: block;
                list-style-type: none;
            }
            .hippo-translation-doclisting > ul > li {
                display: inline;
                padding-right: 4px;
                white-space: nowrap;
            }
        }
    }

    > thead {
        color: @doclist-head-color;
        background-color: @doclist-head-bgcolor;

        > tr {
            display: block;
            position: relative;
            width: 100%;
            height: @doclist-head-height;

            > th {
                height: @doclist-head-height - (2 * @doclist-padding);
                font-size: @font-size-large;
                cursor: pointer;

                &:first-child {
                    padding-left: @doclist-left-right-padding;
                }
            }

            .hippo-list-order-ascending {
                color: @doclist-head-sorted-color;
                background: url("@{images_legacy}/icons/arrow-sort-down-16.png") no-repeat right;
            }

            .hippo-list-order-descending {
                color: @doclist-head-sorted-color;
                background: url("@{images_legacy}/icons/arrow-sort-up-16.png") center right no-repeat;
            }
        }
    }

    > tbody {
        display: block;
        overflow-x: hidden;
        overflow-y: auto;
        width: 100%;
        padding-left: @doclist-left-right-padding;

        > tr {
            /* prevent IE10 from setting tbody height on all rows */
            height: auto;

            border-top: 1px solid @doclist-row-separator-color;

            > td {
                > span span {
                    display: block;
                    overflow: hidden;
                    max-height: 2.1 * @line-height-computed;
                }
            }
            .link {
                cursor: pointer;
            }

            &:first-child {
                border-top: none;

                > td > span {
                    display: block;
                    margin-top: @doclist-padding;
                }
            }
        }

        .hippo-list-selected {

            border-top-color: transparent;

            > td:first-child,
            > td:nth-child(2) {
                padding: 0;

                > span {
                    display: flex;
                    align-items: center;
                    background-color: @doclist-row-selected-bgcolor;
                    color: @doclist-row-selected-color;
                    border-radius: 4px;
                    padding: @doclist-padding @doclist-padding @doclist-padding 0;
                    height: 2.1 * @line-height-computed;
                }
            }
            > td:first-child > span {
                border-top-right-radius: 0;
                border-bottom-right-radius: 0;
            }
            > td:nth-child(2) > span {
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
            }
            + tr {
                border-top-color: transparent;
            }

        }
    }

    > tfoot > tr {
        height: @doclist-foot-height;
        padding-left: @doclist-left-right-padding;

        &.hippo-list-paging {

            > td {
                .paging-container {
                    border-top: 1px solid @doclist-row-separator-color;
                    margin-left: @doclist-left-right-padding;
                    width: 100%;
                    height: @doclist-foot-height - 1;
                    display: flex;
                    justify-content: center;
                    align-items: center;

                    .paging-navigator {
                        display: flex;
                        justify-content: center;
                        align-items: stretch;

                        .first, .prev, .next, .last, a {
                            padding: 2px 6px;
                            margin: 0 1px;
                        }
                        a {
                            background-color: @doclist-paging-button-fill;
                            border: 1px solid @doclist-paging-button-stroke;
                            border-radius: 2px;
                            color: @text-color;
                            &:hover {
                                text-decoration: none;
                                color: @doclist-paging-button-hover-color;
                                background-color: @doclist-paging-button-hover-fill;
                            }
                        }

                    }
                    .paging-label {
                        display: inline-block;
                        position: absolute;
                        height: @font-size-base;
                        padding-top: (@doclist-foot-height - @font-size-base) / 2;
                        right: @doclist-padding;
                    }
                }
            }
        }
    }
}

/* toggle button */
.toggle-button {
    display: block;
    position: absolute;
    top: 8px;
    right: 8px;
    float: right;
    z-index: 100;
}

.toggle-button > a > img {
    vertical-align: bottom;
}
