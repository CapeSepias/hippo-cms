(function(){function j(d,e){if(d.indexOf)return d.indexOf(e);for(var a=0,i=d.length;a<i;++a)if(d[a]==e)return a;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(d,e,a){a!=CodeMirror.Init&&a&&d.removeKeyMap("autoCloseTags");if(e){a={name:"autoCloseTags"};if(typeof e!="object"||e.whenClosing)a["'/'"]=function(i){var a;var c=i.getCursor(),b=i.getTokenAt(c),g=CodeMirror.innerMode(i.getMode(),b.state),h=g.state;if(b.type=="string"||b.string.charAt(0)!="<"||b.start!=c.ch-1||g.mode.name!="xml")a=
CodeMirror.Pass;else(c=h.context&&h.context.tagName)&&i.replaceSelection("/"+c+">","end");return a};if(typeof e!="object"||e.whenOpening)a["'>'"]=function(a){var e;var c=a.getCursor(),b=a.getTokenAt(c),g=CodeMirror.innerMode(a.getMode(),b.state),h=g.state;if(g.mode.name!="xml"||!h.tagName)e=CodeMirror.Pass;else{var f=a.getOption("autoCloseTags"),d=g.mode.configuration=="html",g=typeof f=="object"&&f.dontCloseTags||d&&l,d=typeof f=="object"&&f.indentTags||d&&m,f=h.tagName;b.end>c.ch&&(f=f.slice(0,
f.length-b.end+c.ch));var k=f.toLowerCase();if(b.type=="string"&&(b.end!=c.ch||!/[\"\']/.test(b.string.charAt(b.string.length-1))||b.string.length==1)||b.type=="tag"&&h.type=="closeTag"||b.string.indexOf("/")==b.string.length-1||g&&j(g,k)>-1)e=CodeMirror.Pass;else{h=(b=d&&j(d,k)>-1)?CodeMirror.Pos(c.line+1,0):CodeMirror.Pos(c.line,c.ch+1);a.replaceSelection(">"+(b?"\n\n":"")+"</"+f+">",{head:h,anchor:h});if(b){a.indentLine(c.line+1);a.indentLine(c.line+2)}}}return e};d.addKeyMap(a)}});var l="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),
m="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ")})();