(function(){function f(d,a){var b=d.getRange(CodeMirror.Pos(a.line,a.ch-1),CodeMirror.Pos(a.line,a.ch+1));return 2==b.length?b:null}function g(d){for(var a={name:"autoCloseBrackets",Backspace:function(a){if(a.somethingSelected())return CodeMirror.Pass;var b=a.getCursor(),c=f(a,b);if(c&&0==d.indexOf(c)%2)a.replaceRange("",CodeMirror.Pos(b.line,b.ch-1),CodeMirror.Pos(b.line,b.ch+1));else return CodeMirror.Pass}},b="",c=0;c<d.length;c+=2)(function(c,d){function f(a){var b=a.getCursor();if(a.getRange(b,
CodeMirror.Pos(b.line,b.ch+1))!=d||a.somethingSelected())return CodeMirror.Pass;a.execCommand("goCharRight")}c!=d&&(b=b+d);a["'"+c+"'"]=function(a){if(c=="'"&&a.getTokenAt(a.getCursor()).type=="comment")return CodeMirror.Pass;if(a.somethingSelected()){var e=a.getSelection();a.replaceSelection(c+e+d)}else if(!(c==d&&f(a)!=CodeMirror.Pass)){var e=a.getCursor(),i=CodeMirror.Pos(e.line,e.ch+1),h=a.getLine(e.line),j=h.charAt(e.ch),g=e.ch>0?h.charAt(e.ch-1):"";if(!(c==d&&CodeMirror.isWordChar(g))&&(h.length==
e.ch||b.indexOf(j)>=0||k.test(j)))a.replaceSelection(c+d,{head:i,anchor:i});else return CodeMirror.Pass}};c!=d&&(a["'"+d+"'"]=f)})(d.charAt(c),d.charAt(c+1));return a}function l(d){return function(a){var b=a.getCursor(),c=f(a,b);if(!c||0!=d.indexOf(c)%2)return CodeMirror.Pass;a.operation(function(){var c=CodeMirror.Pos(b.line+1,0);a.replaceSelection("\n\n",{anchor:c,head:c},"+input");a.indentLine(b.line+1,null,!0);a.indentLine(b.line+2,null,!0)})}}var k=/\s/;CodeMirror.defineOption("autoCloseBrackets",
!1,function(d,a,b){b!=CodeMirror.Init&&b&&d.removeKeyMap("autoCloseBrackets");if(a){var c="()[]{}''\"\"",b="[]{}";if(typeof a=="string")c=a;else if(typeof a=="object"){if(a.pairs!=null)c=a.pairs;if(a.explode!=null)b=a.explode}a=g(c);if(b)a.Enter=l(b);d.addKeyMap(a)}})})();