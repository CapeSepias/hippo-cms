(function(){function h(a,c,b){function d(b,d,c){if(b.text){var e=i?0:b.text.length-1,f=i?b.text.length:-1;if(b.text.length>g)return null;for(null!=c&&(e=c+o);e!=f;e+=o)if(c=b.text.charAt(e),n.test(c)&&a.getTokenTypeAt(j(d,e+1))==m){var h=p[c];if(">"==h.charAt(1)==i)q.push(c);else{if(q.pop()!=h.charAt(0))return{pos:e,match:!1};if(!q.length)return{pos:e,match:!0}}}}}var e=a.state.matchBrackets,g=e&&e.maxScanLineLength||1E4,e=e&&e.maxScanLines||100,c=c||a.getCursor(),l=a.getLineHandle(c.line),f=c.ch-
1,h=0<=f&&p[l.text.charAt(f)]||p[l.text.charAt(++f)];if(!h)return null;var i=">"==h.charAt(1),o=i?1:-1;if(b&&i!=(f==c.ch))return null;for(var m=a.getTokenTypeAt(j(c.line,f+1)),q=[l.text.charAt(f)],n=/[(){}[\]]/,b=c.line,k,e=i?Math.min(b+e,a.lineCount()):Math.max(-1,b-e);b!=e&&!(k=b==c.line?d(l,b,f):d(a.getLineHandle(b),b));b+=o);return{from:j(c.line,f),to:k&&j(b,k.pos),match:k&&k.match,forward:i}}function m(a,c){var b=a.state.matchBrackets.maxHighlightLineLength||1E3,d=h(a);if(d&&!(a.getLine(d.from.line).length>
b||d.to&&a.getLine(d.to.line).length>b)){var b=d.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",e=a.markText(d.from,j(d.from.line,d.from.ch+1),{className:b}),g=d.to&&a.markText(d.to,j(d.to.line,d.to.ch+1),{className:b});r&&a.state.focused&&a.display.input.focus();d=function(){a.operation(function(){e.clear();g&&g.clear()})};if(c)setTimeout(d,800);else return d}}function n(a){a.operation(function(){g&&(g(),g=null);a.somethingSelected()||(g=m(a,!1))})}var r=/MSIE \d/.test(navigator.userAgent)&&
(null==document.documentMode||8>document.documentMode),j=CodeMirror.Pos,p={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,function(a,c,b){b&&b!=CodeMirror.Init&&a.off("cursorActivity",n);if(c){a.state.matchBrackets=typeof c=="object"?c:{};a.on("cursorActivity",n)}});CodeMirror.defineExtension("matchBrackets",function(){m(this,!0)});CodeMirror.defineExtension("findMatchingBracket",function(a,c){return h(this,a,c)})})();