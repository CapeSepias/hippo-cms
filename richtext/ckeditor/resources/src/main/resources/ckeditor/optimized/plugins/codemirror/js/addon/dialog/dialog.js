(function(){function i(a,c,b){a=a.getWrapperElement().appendChild(document.createElement("div"));a.className=b?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof c?a.innerHTML=c:a.appendChild(c);return a}function j(a,c){a.state.currentNotificationClose&&a.state.currentNotificationClose();a.state.currentNotificationClose=c}CodeMirror.defineExtension("openDialog",function(a,c,b){function d(){g||(g=!0,f.parentNode.removeChild(f))}j(this,null);var f=
i(this,a,b&&b.bottom),g=!1,h=this,e=f.getElementsByTagName("input")[0];if(e){CodeMirror.on(e,"keydown",function(a){if(!b||!b.onKeyDown||!b.onKeyDown(a,e.value,d))if(13==a.keyCode||27==a.keyCode)CodeMirror.e_stop(a),d(),h.focus(),13==a.keyCode&&c(e.value)});if(b&&b.onKeyUp)CodeMirror.on(e,"keyup",function(a){b.onKeyUp(a,e.value,d)});b&&b.value&&(e.value=b.value);e.focus();CodeMirror.on(e,"blur",d)}else if(a=f.getElementsByTagName("button")[0])CodeMirror.on(a,"click",function(){d();h.focus()}),a.focus(),
CodeMirror.on(a,"blur",d);return d});CodeMirror.defineExtension("openConfirm",function(a,c,b){function d(){g||(g=!0,f.parentNode.removeChild(f),h.focus())}j(this,null);var f=i(this,a,b&&b.bottom),a=f.getElementsByTagName("button"),g=!1,h=this,e=1;a[0].focus();for(b=0;b<a.length;++b){var k=a[b];(function(a){CodeMirror.on(k,"click",function(b){CodeMirror.e_preventDefault(b);d();a&&a(h)})})(c[b]);CodeMirror.on(k,"blur",function(){--e;setTimeout(function(){0>=e&&d()},200)});CodeMirror.on(k,"focus",function(){++e})}});
CodeMirror.defineExtension("openNotification",function(a,c){function b(){g||(g=!0,clearTimeout(h),d.parentNode.removeChild(d))}j(this,b);var d=i(this,a,c&&c.bottom),f=c&&(void 0===c.duration?5E3:c.duration),g=!1,h;CodeMirror.on(d,"click",function(a){CodeMirror.e_preventDefault(a);b()});f&&(h=setTimeout(b,c.duration))})})();