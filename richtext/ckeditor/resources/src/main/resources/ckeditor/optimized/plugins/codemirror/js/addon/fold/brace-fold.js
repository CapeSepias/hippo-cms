CodeMirror.registerHelper("fold","brace",function(c,a){function e(f){for(var b=a.ch,e=0;;)if(b=0>=b?-1:g.lastIndexOf(f,b-1),-1==b){if(1==e)break;e=1;b=g.length}else{if(1==e&&b<a.ch)break;d=c.getTokenTypeAt(CodeMirror.Pos(h,b+1));if(!/^(comment|string)/.test(d))return b+1;b-=1}}var h=a.line,g=c.getLine(h),f,d,n="{",o="}";f=e("{");null==f&&(n="[",o="]",f=e("["));if(null!=f){var p=1,q=c.lastLine(),k,m,i=h;a:for(;i<=q;++i)for(var j=c.getLine(i),b=i==h?f:0;;){var l=j.indexOf(n,b),b=j.indexOf(o,b);0>l&&
(l=j.length);0>b&&(b=j.length);b=Math.min(l,b);if(b==j.length)break;if(c.getTokenTypeAt(CodeMirror.Pos(i,b+1))==d)if(b==l)++p;else if(!--p){k=i;m=b;break a}++b}if(!(null==k||h==k&&m==f))return{from:CodeMirror.Pos(h,f),to:CodeMirror.Pos(k,m)}}});CodeMirror.braceRangeFinder=CodeMirror.fold.brace;
CodeMirror.registerHelper("fold","import",function(c,a){function e(d){if(d<c.firstLine()||d>c.lastLine())return null;var a=c.getTokenAt(CodeMirror.Pos(d,1));/\S/.test(a.string)||(a=c.getTokenAt(CodeMirror.Pos(d,a.end+1)));if("keyword"!=a.type||"import"!=a.string)return null;for(var f=d,d=Math.min(c.lastLine(),d+10);f<=d;++f){var e=c.getLine(f).indexOf(";");if(-1!=e)return{startCh:a.end,end:CodeMirror.Pos(f,e)}}}var a=a.line,h=e(a),g;if(!h||e(a-1)||(g=e(a-2))&&g.end.line==a-1)return null;for(g=h.end;;){var f=
e(g.line+1);if(null==f)break;g=f.end}return{from:c.clipPos(CodeMirror.Pos(a,h.startCh+1)),to:g}});CodeMirror.importRangeFinder=CodeMirror.fold["import"];
CodeMirror.registerHelper("fold","include",function(c,a){function e(a){if(a<c.firstLine()||a>c.lastLine())return null;var d=c.getTokenAt(CodeMirror.Pos(a,1));/\S/.test(d.string)||(d=c.getTokenAt(CodeMirror.Pos(a,d.end+1)));if("meta"==d.type&&"#include"==d.string.slice(0,8))return d.start+8}var a=a.line,h=e(a);if(null==h||null!=e(a-1))return null;for(var g=a;null!=e(g+1);)++g;return{from:CodeMirror.Pos(a,h+1),to:c.clipPos(CodeMirror.Pos(g))}});CodeMirror.includeRangeFinder=CodeMirror.fold.include;